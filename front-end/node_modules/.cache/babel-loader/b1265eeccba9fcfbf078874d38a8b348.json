{"ast":null,"code":"import _asyncToGenerator from\"/Users/nasir/coding/pokemon_full_stack_project/pokemon-back-end/src/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nasir/coding/pokemon_full_stack_project/pokemon-back-end/src/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nasir/coding/pokemon_full_stack_project/pokemon-back-end/src/front-end/node_modules/@babel/runtime/regenerator/index.js\";import userSprite from\"../images/ashSprite.png\";import{useEffect,useState}from\"react\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faArrowRight,faArrowLeft,faArrowUp,faArrowDown}from\"@fortawesome/free-solid-svg-icons\";import surprisedPikachu from'../images/surprised_pikachu.jpeg';import{SERVER_URL}from\"../Constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Map(_ref){var currentUser=_ref.currentUser;var _useState=useState(10),_useState2=_slicedToArray(_useState,2),userPosition=_useState2[0],setUserPostion=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPokemonCaught=_useState4[0],setIsPokemonCaught=_useState4[1];var gridIndexes=[];// This array will have indexes from 1-GridLength^2 e.g [1,2,3, .... 98, 99, 100] - this is made via the for loop below\nvar GRIDLENGTH=32;for(var i=1;i<=Math.pow(GRIDLENGTH,2);i++){gridIndexes.push(i);}var grids=gridIndexes.map(function(index){if(index==userPosition){return/*#__PURE__*/_jsx(\"div\",{className:\"oneGrid user-grid\"});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"oneGrid\"});}});var moveRight=function moveRight(){var isOnRightEdge=userPosition%GRIDLENGTH==0;if(!isOnRightEdge){setUserPostion(userPosition+1);}else{console.log('User is on the right edge');}};var moveLeft=function moveLeft(){var isOnLeftEdge=userPosition%GRIDLENGTH==1;if(!isOnLeftEdge){setUserPostion(userPosition-1);}else{console.log('User is on the left edge');}};var moveUp=function moveUp(){var isOnTopEdge=userPosition>0&&userPosition<=GRIDLENGTH;if(!isOnTopEdge){setUserPostion(userPosition-GRIDLENGTH);}else{console.log('User is on the top edge');}};var moveDown=function moveDown(){var isOnBottomEdge=userPosition>GRIDLENGTH*(GRIDLENGTH-1)&&userPosition<=Math.pow(GRIDLENGTH,2);if(!isOnBottomEdge){setUserPostion(userPosition+GRIDLENGTH);}else{console.log('User is on the bottom edge');}};// =============== WILD POKEMON GENERATOR CODE =================\n// UseEffect for running ilPokenmonID - when userPosition changes \nvar _useState5=useState({trainer_id:null,name:null,pokeapi_id:null,sprite_link:null,hp:null,level:null}),_useState6=_slicedToArray(_useState5,2),wildPokemon=_useState6[0],setWildPokemon=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),wildPokemonId=_useState8[0],setWildPokemonId=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),foundWildPokemon=_useState10[0],setFoundWildPokemon=_useState10[1];// fetch a pokemon and console.log the url\nvar grabPokemon=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newPokemon,randomLevel;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://pokeapi.co/api/v2/pokemon/\".concat(wildPokemonId,\"/\")).then(function(response){return response.json();});case 2:newPokemon=_context.sent;randomLevel=Math.floor(Math.random()*90)+5;// use Slice and upperCase to make first letter UpperCase\nsetWildPokemon({trainer_id:currentUser.id,name:newPokemon.name.charAt(0).toUpperCase()+newPokemon.name.slice(1),pokeapi_id:wildPokemonId,sprite_link:newPokemon.sprites.front_default,hp:randomLevel*13,level:randomLevel});case 5:case\"end\":return _context.stop();}}},_callee);}));return function grabPokemon(){return _ref2.apply(this,arguments);};}();useEffect(function(){grabPokemon();},[wildPokemonId]);// Run above useEffect on mount aswell as when wildPokemonId changes state (i.e grabSprite when wildPokemonId change )\n// Function to generate wildPokemonId (between 1 and 493)\nvar wildPokemonIdGenerator=function wildPokemonIdGenerator(){//generate probability \nvar wildPokemonProbability=Math.random();if(wildPokemonProbability>=0.6){// if more than 0.6 - set to found and also set id - \nsetWildPokemonId(Math.floor(Math.random()*493)+1);setFoundWildPokemon(true);}else if(wildPokemonProbability<0.6){setWildPokemon({trainer_id:currentUser.id,name:null,pokeapi_id:null,sprite_link:null,hp:null,level:null});// set to null so previous pokemon not shown!!\nsetFoundWildPokemon(false);}};useEffect(function(){wildPokemonIdGenerator();setIsPokemonCaught(false);},[userPosition]);var addPokemonToDb=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(SERVER_URL+\"/pokemon\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(wildPokemon)}).then(function(response){if(response.status>=200&&response.status<=299){setIsPokemonCaught(true);return response.json();}else{console.log(response);throw Error(response.statusText);}}).catch(function(error){return console.log(error);});case 2:result=_context2.sent;console.log(result);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function addPokemonToDb(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"map-page\",children:currentUser==null?/*#__PURE__*/_jsxs(\"div\",{className:\"surprised-pikachu-page\",children:[/*#__PURE__*/_jsx(\"img\",{src:surprisedPikachu,alt:\"Image of surprised Pikachu\",className:\"surprised-pikachu\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You can't catch Pok\\xE9mon if you haven't logged in! Please login!\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid-container\",children:grids}),/*#__PURE__*/_jsxs(\"div\",{className:\"moves-container\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faArrowUp,onClick:moveUp,className:\"btn up-btn\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faArrowRight,onClick:moveRight,className:\"btn right-btn\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faArrowDown,onClick:moveDown,className:\"btn down-btn\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faArrowLeft,onClick:moveLeft,className:\"btn left-btn\"}),/*#__PURE__*/_jsx(\"img\",{src:userSprite,alt:\"User sprite\",className:\"user-sprite\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"wild-pokemon-container\",children:foundWildPokemon?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:wildPokemon.sprite_link,alt:\"\",className:\"wildPokemon-sprite\"}),/*#__PURE__*/_jsx(\"p\",{children:\"A wild \".concat(wildPokemon.name,\" appeared.\")}),/*#__PURE__*/_jsx(\"p\",{children:\"Level: \".concat(wildPokemon.level)}),isPokemonCaught?/*#__PURE__*/_jsx(\"p\",{children:\"The wild \".concat(wildPokemon.name,\" has been captured.\")}):/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:addPokemonToDb,children:\"Catch\"})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No wild pokemon found\"})})]})});}","map":{"version":3,"sources":["/Users/nasir/coding/pokemon_full_stack_project/pokemon-back-end/src/front-end/src/pages/Map.js"],"names":["userSprite","useEffect","useState","FontAwesomeIcon","faArrowRight","faArrowLeft","faArrowUp","faArrowDown","surprisedPikachu","SERVER_URL","Map","currentUser","userPosition","setUserPostion","isPokemonCaught","setIsPokemonCaught","gridIndexes","GRIDLENGTH","i","push","grids","map","index","moveRight","isOnRightEdge","console","log","moveLeft","isOnLeftEdge","moveUp","isOnTopEdge","moveDown","isOnBottomEdge","trainer_id","name","pokeapi_id","sprite_link","hp","level","wildPokemon","setWildPokemon","wildPokemonId","setWildPokemonId","foundWildPokemon","setFoundWildPokemon","grabPokemon","fetch","then","response","json","newPokemon","randomLevel","Math","floor","random","id","charAt","toUpperCase","slice","sprites","front_default","wildPokemonIdGenerator","wildPokemonProbability","addPokemonToDb","method","headers","body","JSON","stringify","status","Error","statusText","catch","error","result"],"mappings":"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","sourcesContent":["import userSprite from \"../images/ashSprite.png\";\nimport { useEffect, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faArrowRight, faArrowLeft, faArrowUp, faArrowDown } from \"@fortawesome/free-solid-svg-icons\";\nimport surprisedPikachu from '../images/surprised_pikachu.jpeg'\nimport { SERVER_URL } from \"../Constants\";\n\n\n\nexport default function Map({currentUser}) {\n\n  const [userPosition, setUserPostion] = useState(10);\n  const [isPokemonCaught, setIsPokemonCaught] = useState(false);\n\n  let gridIndexes = []; \n  // This array will have indexes from 1-GridLength^2 e.g [1,2,3, .... 98, 99, 100] - this is made via the for loop below\n  const GRIDLENGTH = 32;\n  for (let i = 1; i <= GRIDLENGTH ** 2; i++) {\n    gridIndexes.push(i);\n  }\n\n  const grids = gridIndexes.map((index) => {\n    if (index == userPosition) {\n      return <div className={`oneGrid user-grid`}></div>;\n    } else {\n      return <div className={`oneGrid`}></div>;\n    }\n  });\n\n  const moveRight = () => {\n    \n    const isOnRightEdge = (userPosition%GRIDLENGTH == 0)\n    if(!isOnRightEdge){\n      setUserPostion(userPosition+1)\n    } else{\n      console.log('User is on the right edge');\n    }\n  }\n\n  const moveLeft = () => {\n    const isOnLeftEdge = (userPosition%GRIDLENGTH == 1)\n    if(!isOnLeftEdge){\n      setUserPostion(userPosition-1)\n    } else{\n      console.log('User is on the left edge');\n    }\n  }\n\n  const moveUp = () => {\n    const isOnTopEdge = (userPosition>0 && userPosition<=GRIDLENGTH)\n    if(!isOnTopEdge){\n      setUserPostion(userPosition-GRIDLENGTH)\n    } else{\n      console.log('User is on the top edge');\n    }\n    \n  }\n\n  const moveDown = () => {\n    const isOnBottomEdge = (userPosition>(GRIDLENGTH*(GRIDLENGTH-1)) && userPosition<=GRIDLENGTH**2)\n    if(!isOnBottomEdge){\n      setUserPostion(userPosition+GRIDLENGTH)\n    } else{\n      console.log('User is on the bottom edge');\n    }\n    \n  }\n\n\n  // =============== WILD POKEMON GENERATOR CODE =================\n\n  // UseEffect for running ilPokenmonID - when userPosition changes \n  const [wildPokemon, setWildPokemon] = useState({\n    trainer_id: null,\n    name: null,\n    pokeapi_id: null,\n    sprite_link: null,\n    hp: null,\n    level: null\n  });\n  const [wildPokemonId, setWildPokemonId] = useState(1);\n  const [foundWildPokemon, setFoundWildPokemon] = useState(true);\n\n  // fetch a pokemon and console.log the url\n\n  const grabPokemon = async () => {\n    const newPokemon = await fetch(`https://pokeapi.co/api/v2/pokemon/${wildPokemonId}/`)\n    .then(response => response.json())\n\n    let randomLevel = Math.floor(Math.random() * 90) + 5\n\n    // use Slice and upperCase to make first letter UpperCase\n    setWildPokemon({\n      trainer_id: currentUser.id,\n      name: newPokemon.name.charAt(0).toUpperCase() + newPokemon.name.slice(1),\n      pokeapi_id: wildPokemonId,\n      sprite_link: newPokemon.sprites.front_default,\n      hp: randomLevel*13,\n      level: randomLevel\n    });\n}\n\n  useEffect(()=>{\n      grabPokemon();\n  },[wildPokemonId])\n  // Run above useEffect on mount aswell as when wildPokemonId changes state (i.e grabSprite when wildPokemonId change )\n\n  // Function to generate wildPokemonId (between 1 and 493)\n  const wildPokemonIdGenerator = () => {\n\n      //generate probability \n      const wildPokemonProbability = Math.random();\n      if(wildPokemonProbability >= 0.6){\n          // if more than 0.6 - set to found and also set id - \n          setWildPokemonId(Math.floor(Math.random() * 493) + 1);\n          setFoundWildPokemon(true)\n          \n      } else if(wildPokemonProbability < 0.6){\n          setWildPokemon({\n            trainer_id: currentUser.id,\n            name: null,\n            pokeapi_id: null,\n            sprite_link: null,\n            hp: null,\n            level: null\n          }); // set to null so previous pokemon not shown!!\n          setFoundWildPokemon(false)\n      }  \n  }\n\n\n\n  useEffect(()=>{\n    wildPokemonIdGenerator();\n    setIsPokemonCaught(false);\n  }, [userPosition])\n\n\n  const addPokemonToDb = async () => {\n    const result = await fetch(SERVER_URL + \"/pokemon\",{\n      method:\"POST\",\n      headers:{\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(wildPokemon)\n    })\n    .then(response => {\n      if (response.status >= 200 && response.status <= 299) {\n        setIsPokemonCaught(true)\n        return response.json();\n      } else {\n        console.log(response);\n        throw Error(response.statusText);\n      }\n    })\n    .catch(error => console.log(error))\n\n    console.log(result);\n    \n  }\n\n\n\n\n\n\n\n  return (\n    <div className=\"map-page\">\n      {currentUser == null ? (\n        <div className=\"surprised-pikachu-page\">\n          <img src={surprisedPikachu} alt={`Image of surprised Pikachu`} className=\"surprised-pikachu\" />\n          <p>You can't catch Pok√©mon if you haven't logged in! Please login!</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"grid-container\">{grids}</div>\n\n          <div className=\"moves-container\">\n            <FontAwesomeIcon\n              icon={faArrowUp}\n              onClick={moveUp}\n              className=\"btn up-btn\"\n            />\n            <FontAwesomeIcon\n              icon={faArrowRight}\n              onClick={moveRight}\n              className=\"btn right-btn\"\n            />\n            <FontAwesomeIcon\n              icon={faArrowDown}\n              onClick={moveDown}\n              className=\"btn down-btn\"\n            />\n            <FontAwesomeIcon\n              icon={faArrowLeft}\n              onClick={moveLeft}\n              className=\"btn left-btn\"\n            />\n            <img src={userSprite} alt=\"User sprite\" className=\"user-sprite\" />\n          </div>\n\n          <div className=\"wild-pokemon-container\">\n            {foundWildPokemon ? (\n              <>\n                <img\n                  src={wildPokemon.sprite_link}\n                  alt=\"\"\n                  className=\"wildPokemon-sprite\"\n                />\n                <p>{`A wild ${wildPokemon.name} appeared.`}</p>\n                <p>{`Level: ${wildPokemon.level}`}</p>\n                {isPokemonCaught ? \n                <p>{`The wild ${wildPokemon.name} has been captured.`}</p> \n                :\n                <button className=\"btn\" onClick={addPokemonToDb}>Catch</button>\n                }\n              </>\n            ) : (\n              <p>No wild pokemon found</p>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}